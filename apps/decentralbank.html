<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="srcp:did" content="did:srcp:app/decentralbank">
  <meta name="srcp:app" content="decentralbank">
  <title>DecentralBank - P2P Lending Platform</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #0f3460 100%);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    header {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .subtitle { color: #aaa; font-size: 1.1rem; }
    .dashboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .stat-card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 25px;
      backdrop-filter: blur(10px);
    }
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      margin: 10px 0;
      color: #00d4ff;
    }
    .stat-label { color: #aaa; font-size: 0.9rem; }
    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    @media (max-width: 1024px) {
      .main-content { grid-template-columns: 1fr; }
    }
    .card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      padding: 30px;
      backdrop-filter: blur(10px);
    }
    .card h2 {
      font-size: 1.5rem;
      margin-bottom: 20px;
      color: #00d4ff;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      color: #aaa;
      font-size: 0.9rem;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      color: #fff;
      font-size: 1rem;
    }
    input::placeholder, textarea::placeholder {
      color: rgba(255,255,255,0.3);
    }
    textarea {
      min-height: 100px;
      resize: vertical;
      font-family: inherit;
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #00d4ff;
    }
    button {
      padding: 12px 30px;
      background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,212,255,0.3);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    .loan-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-height: 600px;
      overflow-y: auto;
    }
    .loan-item {
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 20px;
      transition: border-color 0.3s;
    }
    .loan-item:hover {
      border-color: #00d4ff;
    }
    .loan-header {
      display: flex;
      justify-content: space-between;
      align-items: start;
      margin-bottom: 15px;
    }
    .loan-amount {
      font-size: 1.5rem;
      font-weight: bold;
      color: #00d4ff;
    }
    .loan-status {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
    }
    .status-active { background: rgba(0,212,255,0.2); color: #00d4ff; }
    .status-pending { background: rgba(255,193,7,0.2); color: #ffc107; }
    .status-funded { background: rgba(76,175,80,0.2); color: #4caf50; }
    .loan-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    .detail-item {
      font-size: 0.9rem;
    }
    .detail-label {
      color: #aaa;
      margin-right: 5px;
    }
    .detail-value {
      color: #fff;
      font-weight: bold;
    }
    .loan-description {
      color: #ccc;
      font-size: 0.9rem;
      margin-bottom: 15px;
      line-height: 1.5;
    }
    .loan-actions {
      display: flex;
      gap: 10px;
    }
    .loan-actions button {
      flex: 1;
      padding: 10px;
      font-size: 0.9rem;
    }
    .credit-score {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 0.9rem;
    }
    .score-excellent { background: rgba(76,175,80,0.2); color: #4caf50; }
    .score-good { background: rgba(0,212,255,0.2); color: #00d4ff; }
    .score-fair { background: rgba(255,193,7,0.2); color: #ffc107; }
    .score-poor { background: rgba(244,67,54,0.2); color: #f44336; }
    .progress-bar {
      width: 100%;
      height: 8px;
      background: rgba(0,0,0,0.3);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #00d4ff 0%, #7b2cbf 100%);
      transition: width 0.3s;
    }
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      color: #fff;
    }
    .tab.active {
      background: linear-gradient(135deg, #00d4ff 0%, #7b2cbf 100%);
      border-color: transparent;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .alert {
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }
    .alert-info {
      background: rgba(0,212,255,0.1);
      border: 1px solid rgba(0,212,255,0.3);
      color: #00d4ff;
    }
    .interest-calc {
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
    }
    .interest-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
.srcp-nav{display:flex;gap:12px;padding:10px;background:#0f1522;border-bottom:1px solid #1e2740;position:sticky;top:0;z-index:999;flex-wrap:wrap}
.srcp-nav a{color:#9bdcff;text-decoration:none;font-weight:600;font-size:13px;padding:4px 8px;border-radius:4px;transition:background .2s}
.srcp-nav a:hover{background:rgba(155,220,255,.1)}
  </style>

</head>
<body>

 
  <nav class="srcp-nav">
  <a href="./srcp-complete-explorer.html">üß≠ Explorer</a>
  <a href="./srcp-dashboard.html">üìä Dashboard</a>
  <a href="./marketplace.html">üõí Marketplace</a>
  <a href="./truthrank.html">üß† TruthRank</a>
  <a href="./govchain.html">üèõÔ∏è GovChain</a>
  <a href="./knowledgechain.html">üìö Knowledge</a>
  <a href="./skillswap.html">üíº SkillSwap</a>
  <a href="./decentralbank.html">üí∞ Bank</a>
  <a href="./messenger.html">üí¨ Messenger</a>
  <a href="./uyea.html">ü§ñ UYEA</a>
  <a href="./complete-demo.html">üî• Demo</a>
  <a href="./truthrank-portal.html">üè† Portal</a>
  <a href="./srcp-jsonflow-platform.html">üî• Json-Flow</a>
  <a href="./truthrank-test-suite.html">üè† Test</a>
  <a href="./olSearch.html">üè† Address-Manager</a>
  <a href="./token-platform.html">üè† Token</a>
   <a href="./srcp-jbc.html">üè† PLATFORM</a>

</nav>
  <div class="container">
    <header>
      <h1>üí∞ DecentralBank</h1>
      <p class="subtitle">P2P Lending Platform - Borrow and lend SRCP tokens without intermediaries</p>
    </header>

    <div class="dashboard">
      <div class="stat-card">
        <div class="stat-label">Your Balance</div>
        <div class="stat-value" id="userBalance">12,450</div>
        <div class="stat-label">SRCP Tokens</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total Loans Given</div>
        <div class="stat-value" id="totalLent">8,500</div>
        <div class="stat-label">SRCP Tokens</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Active Loans</div>
        <div class="stat-value" id="activeLoans">3</div>
        <div class="stat-label">Loans</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Credit Score</div>
        <div class="stat-value" style="color: #4caf50;">850</div>
        <div class="credit-score score-excellent">Excellent</div>
      </div>
    </div>

    <div class="main-content">
      <!-- Request Loan -->
      <div class="card">
        <h2>üìã Request Loan</h2>
        <div class="alert alert-info">
          ‚ÑπÔ∏è Your credit score: <strong>850</strong> - You qualify for loans up to <strong>25,000 SRCP</strong> at competitive rates.
        </div>
        
        <form id="loanRequestForm" onsubmit="requestLoan(event)">
          <div class="form-group">
            <label for="loanAmount">Loan Amount (SRCP)</label>
            <input type="number" id="loanAmount" placeholder="5000" min="100" max="25000" required onkeyup="calculateInterest()">
          </div>
          
          <div class="form-group">
            <label for="loanPurpose">Purpose</label>
            <select id="loanPurpose" required>
              <option value="">Select purpose...</option>
              <option value="business">Business Expansion</option>
              <option value="education">Education</option>
              <option value="emergency">Emergency</option>
              <option value="investment">Investment</option>
              <option value="other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="loanDuration">Loan Duration (months)</label>
            <select id="loanDuration" required onchange="calculateInterest()">
              <option value="3">3 months</option>
              <option value="6">6 months</option>
              <option value="12">12 months</option>
              <option value="24">24 months</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="loanDescription">Description</label>
            <textarea id="loanDescription" placeholder="Explain why you need this loan and how you'll use it..." required></textarea>
          </div>
          
          <div class="interest-calc">
            <div class="interest-row">
              <span>Interest Rate:</span>
              <span id="interestRate">5%</span>
            </div>
            <div class="interest-row">
              <span>Total Repayment:</span>
              <span id="totalRepayment" style="color: #00d4ff; font-weight: bold;">0 SRCP</span>
            </div>
            <div class="interest-row">
              <span>Monthly Payment:</span>
              <span id="monthlyPayment" style="color: #00d4ff;">0 SRCP</span>
            </div>
          </div>
          
          <button type="submit" style="margin-top: 20px; width: 100%;">üì® Submit Loan Request</button>
        </form>
      </div>

      <!-- Browse Loans to Fund -->
      <div class="card">
        <h2>üí∏ Fund Loans</h2>
        
        <div class="tabs">
          <button class="tab active" onclick="switchTab('all')">All Loans</button>
          <button class="tab" onclick="switchTab('business')">Business</button>
          <button class="tab" onclick="switchTab('education')">Education</button>
          <button class="tab" onclick="switchTab('emergency')">Emergency</button>
        </div>
        
        <div id="loansList" class="loan-list">
          <!-- Loans will be rendered here -->
        </div>
      </div>
    </div>

    <!-- My Loans Section -->
    <div class="card">
      <h2>üìä My Loans</h2>
      <div class="tabs">
        <button class="tab active" onclick="switchMyLoansTab('borrowed')">Borrowed</button>
        <button class="tab" onclick="switchMyLoansTab('lent')">Lent Out</button>
      </div>
      
      <div id="borrowedLoans" class="tab-content active">
        <div class="loan-list">
          <div class="loan-item">
            <div class="loan-header">
              <div>
                <div class="loan-amount">3,500 SRCP</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">Business Expansion</div>
              </div>
              <div class="loan-status status-active">Active</div>
            </div>
            <div class="loan-details">
              <div class="detail-item">
                <span class="detail-label">Interest:</span>
                <span class="detail-value">5%</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Duration:</span>
                <span class="detail-value">12 months</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Paid:</span>
                <span class="detail-value">1,850 SRCP</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Remaining:</span>
                <span class="detail-value">1,825 SRCP</span>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 50%"></div>
            </div>
            <div style="margin-top: 15px; font-size: 0.85rem; opacity: 0.7;">
              Next payment: 306 SRCP due in 18 days
            </div>
            <div class="loan-actions" style="margin-top: 15px;">
              <button onclick="makePayment(3500)">üí≥ Make Payment</button>
              <button style="background: rgba(255,255,255,0.1);">üìÑ View Details</button>
            </div>
          </div>
        </div>
      </div>
      
      <div id="lentLoans" class="tab-content">
        <div class="loan-list">
          <div class="loan-item">
            <div class="loan-header">
              <div>
                <div class="loan-amount">2,000 SRCP</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">to bob.srcp - Education</div>
              </div>
              <div class="loan-status status-active">Active</div>
            </div>
            <div class="loan-details">
              <div class="detail-item">
                <span class="detail-label">Interest:</span>
                <span class="detail-value">6%</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Duration:</span>
                <span class="detail-value">6 months</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Received:</span>
                <span class="detail-value">680 SRCP</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Expected:</span>
                <span class="detail-value">2,120 SRCP</span>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 32%"></div>
            </div>
            <div style="margin-top: 15px; font-size: 0.85rem; opacity: 0.7;">
              Next payment expected in 12 days
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let loans = [
      {
        id: 1,
        borrower: 'alice.srcp',
        amount: 5000,
        purpose: 'business',
        description: 'Need funds to purchase inventory for my online store. Expected ROI of 30% in 6 months.',
        duration: 6,
        interestRate: 5.5,
        creditScore: 820,
        funded: 3200,
        goal: 5000
      },
      {
        id: 2,
        borrower: 'charlie.srcp',
        amount: 3000,
        purpose: 'education',
        description: 'Funding for blockchain development bootcamp. Will increase earning potential significantly.',
        duration: 12,
        interestRate: 4.5,
        creditScore: 780,
        funded: 2100,
        goal: 3000
      },
      {
        id: 3,
        borrower: 'dave.srcp',
        amount: 2500,
        purpose: 'emergency',
        description: 'Unexpected medical expenses. Have stable income and excellent repayment history.',
        duration: 3,
        interestRate: 7,
        creditScore: 750,
        funded: 2500,
        goal: 2500
      },
      {
        id: 4,
        borrower: 'emma.srcp',
        amount: 8000,
        purpose: 'business',
        description: 'Expanding my consulting business. Need equipment and marketing budget.',
        duration: 12,
        interestRate: 6,
        creditScore: 850,
        funded: 1600,
        goal: 8000
      }
    ];

    let currentFilter = 'all';

    function renderLoans(loansToRender = loans) {
      const loansList = document.getElementById('loansList');
      
      loansList.innerHTML = loansToRender.map(loan => {
        const fundedPercent = (loan.funded / loan.goal * 100).toFixed(0);
        const isFunded = loan.funded >= loan.goal;
        const statusClass = isFunded ? 'status-funded' : 'status-active';
        const statusText = isFunded ? 'Funded' : 'Active';
        const scoreClass = loan.creditScore >= 800 ? 'score-excellent' :
                          loan.creditScore >= 700 ? 'score-good' :
                          loan.creditScore >= 600 ? 'score-fair' : 'score-poor';
        
        return `
          <div class="loan-item">
            <div class="loan-header">
              <div>
                <div class="loan-amount">${loan.amount.toLocaleString()} SRCP</div>
                <div style="font-size: 0.9rem; opacity: 0.8;">${loan.borrower}</div>
              </div>
              <div class="loan-status ${statusClass}">${statusText}</div>
            </div>
            <div class="loan-description">${loan.description}</div>
            <div class="loan-details">
              <div class="detail-item">
                <span class="detail-label">Interest:</span>
                <span class="detail-value">${loan.interestRate}%</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Duration:</span>
                <span class="detail-value">${loan.duration} months</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Credit Score:</span>
                <span class="credit-score ${scoreClass}">${loan.creditScore}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Funded:</span>
                <span class="detail-value">${loan.funded.toLocaleString()} / ${loan.goal.toLocaleString()}</span>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${fundedPercent}%"></div>
            </div>
            <div class="loan-actions" style="margin-top: 15px;">
              ${!isFunded ? `
                <button onclick="fundLoan(${loan.id})">üí∞ Fund This Loan</button>
                <button style="background: rgba(255,255,255,0.1);" onclick="viewBorrower('${loan.borrower}')">üë§ View Borrower</button>
              ` : `
                <button disabled>‚úÖ Fully Funded</button>
              `}
            </div>
          </div>
        `;
      }).join('');
    }

    function switchTab(category) {
      currentFilter = category;
      
      document.querySelectorAll('.tabs .tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      if (category === 'all') {
        renderLoans(loans);
      } else {
        renderLoans(loans.filter(loan => loan.purpose === category));
      }
    }

    function switchMyLoansTab(tab) {
      document.querySelectorAll('.card:last-child .tab').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');
      
      document.getElementById('borrowedLoans').classList.remove('active');
      document.getElementById('lentLoans').classList.remove('active');
      
      if (tab === 'borrowed') {
        document.getElementById('borrowedLoans').classList.add('active');
      } else {
        document.getElementById('lentLoans').classList.add('active');
      }
    }

    function calculateInterest() {
      const amount = parseFloat(document.getElementById('loanAmount').value) || 0;
      const duration = parseInt(document.getElementById('loanDuration').value) || 3;
      
      const creditScore = 850;
      let rate = 5;
      
      if (creditScore >= 800) rate = 4.5;
      else if (creditScore >= 700) rate = 5.5;
      else if (creditScore >= 600) rate = 7;
      else rate = 10;
      
      if (duration === 3) rate += 1;
      else if (duration === 24) rate -= 0.5;
      
      const interest = amount * (rate / 100);
      const total = amount + interest;
      const monthly = total / duration;
      
      document.getElementById('interestRate').textContent = rate.toFixed(1) + '%';
      document.getElementById('totalRepayment').textContent = Math.round(total).toLocaleString() + ' SRCP';
      document.getElementById('monthlyPayment').textContent = Math.round(monthly).toLocaleString() + ' SRCP';
    }

    function requestLoan(event) {
      event.preventDefault();
      
      const amount = document.getElementById('loanAmount').value;
      const purpose = document.getElementById('loanPurpose').value;
      const duration = document.getElementById('loanDuration').value;
      const description = document.getElementById('loanDescription').value;
      
      const newLoan = {
        id: loans.length + 1,
        borrower: 'you.srcp',
        amount: parseInt(amount),
        purpose: purpose,
        description: description,
        duration: parseInt(duration),
        interestRate: 5,
        creditScore: 850,
        funded: 0,
        goal: parseInt(amount)
      };
      
      loans.unshift(newLoan);
      renderLoans();
      
      document.getElementById('loanRequestForm').reset();
      calculateInterest();
      
      alert(`‚úÖ Loan request submitted!\n\nAmount: ${parseInt(amount).toLocaleString()} SRCP\nDuration: ${duration} months\n\nYour request is now live and available for funding by lenders.`);
    }

    function fundLoan(loanId) {
      const loan = loans.find(l => l.id === loanId);
      const amount = prompt(`How much would you like to fund?\n\nLoan: ${loan.amount.toLocaleString()} SRCP\nAlready funded: ${loan.funded.toLocaleString()} SRCP\nRemaining: ${(loan.goal - loan.funded).toLocaleString()} SRCP\n\nEnter amount:`);
      
      if (amount && !isNaN(amount)) {
        const fundAmount = parseInt(amount);
        const userBalance = 12450;
        
        if (fundAmount > userBalance) {
          alert('‚ùå Insufficient balance!');
          return;
        }
        
        if (fundAmount > (loan.goal - loan.funded)) {
          alert('‚ùå Amount exceeds remaining loan need!');
          return;
        }
        
        loan.funded += fundAmount;
        renderLoans();
        
        const newBalance = userBalance - fundAmount;
        document.getElementById('userBalance').textContent = newBalance.toLocaleString();
        
        const totalLent = parseInt(document.getElementById('totalLent').textContent.replace(',', '')) + fundAmount;
        document.getElementById('totalLent').textContent = totalLent.toLocaleString();
        
        alert(`‚úÖ Successfully funded ${fundAmount.toLocaleString()} SRCP!\n\nYou will earn ${loan.interestRate}% interest over ${loan.duration} months.`);
      }
    }

    function viewBorrower(borrower) {
      alert(`üë§ Viewing profile for ${borrower}\n\n(Full profile page coming soon!)`);
    }

    function makePayment(loanAmount) {
      const payment = prompt('Enter payment amount (SRCP):');
      if (payment && !isNaN(payment)) {
        alert(`‚úÖ Payment of ${parseInt(payment).toLocaleString()} SRCP processed!\n\nYour loan balance has been updated.`);
      }
    }

    renderLoans();
    calculateInterest();
  </script>
</body>
</html>
